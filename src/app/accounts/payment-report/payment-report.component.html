
<!-- Content Wrapper. Contains page content -->
<div class="wrapper">
  <div class="content-wrapper">
    <ol class="breadcrumb">
      <li><a ui-sref="app.mydashboard" href="#"><i class="fa fa-dashboard"></i> My Dashboard</a></li>
      <li class="active">Payment Report</li>
    </ol>
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <form novalidate (ngSubmit)="validatePaymentReportForm()" [formGroup]="paymentReportForm" autocomplete="off">
        <div class="row">
         <div class="col-md-2">
          <div class="form-group">
            <label>Start Date<sup style="color:red;">*</sup></label>
            <input name="bnknm" placeholder="Enter Date" type='text' class="form-control" [owlDateTime]="report_start_date" [owlDateTimeTrigger]="report_start_date"  formControlName="start_date" required [class.error1]="!paymentReportForm.controls.start_date.valid && paymentReportForm.controls.start_date.dirty" [(ngModel)]="paymentReportData.start_date" />
            <owl-date-time  [pickerType]="'calendar'" #report_start_date></owl-date-time>
            <div *ngIf="( paymentReportForm.get('start_date').hasError('minlength') || paymentReportForm.get('start_date').hasError('pattern') || paymentReportForm.get('start_date').hasError('required') ) && paymentReportForm.get('start_date').touched">
              <div class="error" *ngIf="(paymentReportForm.get('start_date').hasError('required') && paymentReportForm.get('start_date').touched)">
                This field is mandatory
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-2">
          <div class="form-group">
            <label>End Date<sup style="color:red;">*</sup></label>
            <input name="endDate" type='text' placeholder="Enter Date" class="form-control" [owlDateTime]="report_end_date" [owlDateTimeTrigger]="report_end_date" formControlName="end_date" required [class.error1]="!paymentReportForm.controls.end_date.valid && paymentReportForm.controls.end_date.dirty" [(ngModel)]="paymentReportData.end_date" />
            <owl-date-time  [pickerType]="'calendar'" #report_end_date></owl-date-time>
            <div *ngIf="( paymentReportForm.get('end_date').hasError('minlength') || paymentReportForm.get('end_date').hasError('pattern') || paymentReportForm.get('end_date').hasError('required') ) && paymentReportForm.get('end_date').touched">
              <div class="error" *ngIf="(paymentReportForm.get('end_date').hasError('required') && paymentReportForm.get('end_date').touched)">
                This field is mandatory
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group multiselect-holder" >
            <label>Components<sup style="color:red;">*</sup></label><br>
            <ng-multiselect-dropdown
            [placeholder]="'Select Component'"
            [data]="dropdownList"
           [(ngModel)]="paymentReportData.components"
            [settings]="dropdownSettings"
            (onSelect)="onItemSelect($event)"
            (onSelectAll)="onSelectAll($event)"

            formControlName="components" required [class.error1]="!paymentReportForm.controls.components.valid && paymentReportForm.controls.components.dirty"
            >
          </ng-multiselect-dropdown>
          <div *ngIf="( paymentReportForm.get('components').hasError('minlength') || paymentReportForm.get('components').hasError('pattern') || paymentReportForm.get('components').hasError('required') ) && paymentReportForm.get('components').touched">
            <div class="error" *ngIf="(paymentReportForm.get('components').hasError('required') && paymentReportForm.get('components').touched)">
              This field is mandatory
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-1" style="margin-top: 25px;">
        <button type="submit" class="btn bg-orange btn-flat" [disabled]="paymentReportForm.invalid">Submit</button>
      </div>
    </div>
  </form>
</section>
<!-- Main content -->
<section class="content">

  <div class="row">
    <div class="box-body" *ngIf="showReport">
      <div class="">
        <table class="table table-bordered table-striped table-hover" datatable [dtOptions]="payemntReportTableOptions"  [dtTrigger]="paymentReportTableTrigger">
          <thead>
            <tr>
             <th>Pan Number</th>
             <th>Name</th>
             <th>Employee No</th>
             <th *ngFor="let rh of reportHeader">{{rh.label}}</th>
             <th>Total</th>
           </tr>
         </thead>
         <tbody>
          <tr  *ngFor="let r of report_data">
            <td>{{r.pan}}</td>
            <td>{{r.user_name}}</td>
            <td>{{r.employee_number}}</td>
            <td *ngFor="let a of r.data">{{a.amount | currency:"₹"}}</td>
            <td>{{r.total | currency:"₹"}}</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>
<!-- /.row -->
</section>
<!-- /.content -->
</div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    $('#multiple-checkboxes').multiselect({
     allSelectedText: 'All',
     includeSelectAllOption: true,
     buttonClass: 'form-control',
   });
  });
</script>
